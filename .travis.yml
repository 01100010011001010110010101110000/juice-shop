language: node_js
node_js:
- 10
- 9
- 8
branches:
  except:
  - gh-pages
  - l10n_develop
addons:
  apt:
    packages:
    - xvfb
  chrome: stable
  sonarcloud:
    organization: "01100010011001010110010101110000"
    token:
      secure: P0lhMd8N9RNsMlRPcs9cMW3HI+zggZZELpMNJ6MqOU97h11iX6etYVMcYKU8WJ6g/ugVWezk4u2EipVT7gaBXBBneQjo6SS5/nEEMIKtqT1jiEEqGe7+s4+COb/Ch9Lu4dZjDbCukTmJjqQOjF/JKY8sjBPaoj3MfxP4yzpEhM1ee8lDi69j3cp0CLISonCW46dN9gNptRf8lAaWSpu/Gv8z9sBf4Df0fzduhaGbTCce8PafBNTfRnoFMPsNxZMRegNJNEl6XUpTjSzQ7IREwCJrlACn+MWGgKAioBfPyfMdtv7gXz2krX6kRDUhEK9T3hDamZRXQ3z/2KX8iwQJtrHZWa1JT8UEQteDDK7+3GbjQkG+X6BQKTgTS+B5npijmk2wvwseNmVvj2v6f3GR/YxBaCpXS3P9W8thccHCQA+adH24JnOMHkji2e12etPo8MrC5eV3dMN6b/xi/uEpR0LFw8A55/G+NDJOdIvBRghQnt3onRsiH8Q707SJCWiL+33AM0VYOLPnvXbac/zvSon7nA2OzA29Dt4+ljQdXPqpdhPCjpnXNUeKsl9Uml2Jl4wkAmu4wHVcf1zwl0AI9y51HzKFJM5gDSXjZskcBuXJEamTby3zwgge6UmY/vWyt+7PjxWEl0p5beT/BrgENml76NVR3VcvaylWyQFBugQ=
env:
  global:
  - DISPLAY=:99
before_install:
- rm -rf node_modules
before_script:
- npm install grunt-cli -g
- sh -e /etc/init.d/xvfb start
- sleep 3
script:
- npm test
- npm run frisby
- NODE_ENV=ctf npm run protractor
- sonar-scanner -X
after_success:
- "./node_modules/.bin/lcov-result-merger 'build/reports/coverage/*/lcov.info' 'build/reports/coverage/lcov_merged.info'"
- "./node_modules/.bin/codeclimate-test-reporter < ./build/reports/coverage/lcov_merged.info"
notifications:
  webhooks:
    secure: L+X7UC9wCd//tlJEkO0TgiJYaQamy42HM9AEDO6wKvMQ90mkeDmD+YVEE61F9B/wzUR74oAqB0dgjG5SC7+Aal+DkXmPgpJ67QPkq0TIXbiSo/Td6T6HRsfa99t7AevHd0HyNOfj5BK7lftm/5q5PAh3D/pS1fvURgqpCLimFgkllLfoDoVWSjtDRr3P/RKjHlXFZaVr/xUgMxeQVCi5PbYbmNFg3+mRoOR1nm0a9SWKln4nvnSSHfBJXX+gHnTKzif6LGfG0vGPSCVnS1xUKbamJJFUc/5EHLdJb74stMWDzZNOb+cumMEuzEnZSph120pjiB69WFhWviOr6IPrSAnquRvXtHNjeB1aJPsMnPrKamNyY9w9ORcFC8bErzUrC6XU0LPBcq0X0J0ZYFVmwaw+z2vxe6nsouIc+yWavxGphE6/sBj6QLj6OhHwI8jq9yHB98hky0ydMjGqju8dcalifyh4PdPaSJTqz2q8IJL4gsfvB1nSUCtKf8oNzbCxjeK3P6PoKT0LNVpyjumiNNRTyPVy+B80YpDq5HmexB9jLkAsrafYXD87kPydmbY2r38hpF4wKshuUlB6tqTBab9pdssuK0kFWgwsi4roUJitAFX/SdB8hKT1PCa/xrjrsX8MaN917kZ141mxtUOEW6EDvB3CMikG4EFnC3BGHEc=
